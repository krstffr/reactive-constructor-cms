<template name="editTemplate__selectOverview">

	<div class="reactive-constructor-cms-select-overview__fader"></div>

	<div class="reactive-constructor-cms-select-overview reactive-constructor-cms-select-overview--hidden">
	
	<h2>
		{{ headline }}
		<a class="reactive-constructor-cms-select-overview__toggle-view">
			Toggle view
		</a>
	</h2>

	{{#if listViewIs 'list' }}
	
		<ul>
			{{#each selectableItems }}

				<li>
					<a class="reactive-constructor-cms-select-overview__select-item">
						{{{ buttonValue }}}
					</a>
				</li>

			{{/each}}
		</ul>

	{{/if}}

	{{#if listViewIs 'overview' }}

		{{#each selectableItems }}

			<div class="reactive-constructor-cms-select-overview__select-item reactive-constructor-cms-select-overview__img-preview">
				<div
					style="background-image: url('{{ getImgPreview }}');"
					class="reactive-constructor-cms-select-overview__img-preview__img">
				</div>
				<a>{{{ buttonValue }}}</a>
			</div>

		{{/each}}

	{{/if}}

	</div>

</template>

<template name="editTemplate__noReactiveInstanceSet">
	<label title="{{ key }}">
		{{> editTemplate__labelString }}
		<button class="reactive-constructor-cms-create-new-instance">
			Add new {{ key }}
		</button>
	</label>
</template>

<template name="editTemplate__labelString">
	<span class="">
		{{ key }}
		<!-- <span class="reactive-constructor-cms-input-value-type">&lt;{{ type }}&gt;</span> -->
	</span>
</template>

<template name="editTemplate__String">
	
	<label title="{{ key }}">
		{{> editTemplate__labelString }}
		<input type="text" value="{{ value }}">
	</label>
	
</template>

<template name="editTemplate__Textarea">
	
	<label title="{{ key }}">
		{{> editTemplate__labelString }}
		<textarea>{{ value }}</textarea>
	</label>
	
</template>

<template name="editTemplate__Boolean">

	<label title="{{ key }}">
		{{> editTemplate__labelString }}
		<select class="reactive-constructor-cms-bool-select">
				<option value="true" selected="{{#if equals value true }}selected{{/if}}">True</option>
				<option value="false" selected="{{#if equals value false }}selected{{/if}}">False</option>
		</select>
	</label>

</template>

<template name="editTemplate__Collection">

	<label title="{{ key }}">
		{{> editTemplate__labelString }}
	</label>

	<div class="collection">

		<!-- <h3>
			{{ key }}
		</h3> -->

		<div class="collection__items">

			{{#each value }}

				{{> Template.dynamic template=getTemplateFromType }}

			{{/each}}

		</div>

		<button class="reactive-constructor-cms-add-new-coll-item">
			Add new {{ key }}
		</button>

	</div>

</template>

<template name="editTemplate">
	
	{{#if isSingleInstance }}
		<label title="{{ key }}">
			{{> editTemplate__labelString }}
		</label>
	{{/if}}

	<div class="wrap">

		<h2>

			{{#if isBackup }}
				<span class="reactive-constructor-cms-constructor-name">
					Backup of:
				</span>
			{{/if}}

			{{#if isLinkedInstance }}
				<span class="reactive-constructor-cms-constructor-name">
					{{ key }} links to:
				</span>
				<a class="reactive-constructor-cms-open-child-instance">
					{{ getType }}
				</a>
			{{else}}
				{{ getType }}
			{{/if}}

			<span class="reactive-constructor-cms-constructor-name">
				{{ constructorName }}
			</span>

			<span class="rc-cms-links">
			
				<a class="reactive-constructor-cms-open-child-instance">
					Open
				</a>

				{{#if isSingleInstance }}
					<a class="reactive-constructor-cms-remove-nested-instance">
						Remove instance
					</a>
				{{else}}
					<a class="reactive-constructor-cms-remove-collection-item">
						Remove
					</a>

					<a class="reactive-constructor-cms-duplicate-collection-item">
						Duplicate
					</a>

					<a class="reactive-constructor-cms-move-collection-item" data-move="up">
						Up
					</a>

					<a class="reactive-constructor-cms-move-collection-item" data-move="down">
						Down
					</a>
				{{/if}}

				<a class="reactive-constructor-cms-relink-nested-instance">
					Change
				</a>

			</span>

		</h2>

		{{#if isLinkedInstance }}

		{{else}}

			{{! Iterate over all the fields, get the corresponding field }}
			{{#each getReactiveValuesAsArray }}

				{{> Template.dynamic template=getTemplateFromType }}

			{{/each }}

		{{/if}}

	</div>

</template>

<template name="editTemplate__wrapper">

	<div class="reactive-constructor-cms-wrapper wrapper--hidden">

		<div class="wrapper__editable-fields">

			{{> editTemplate }}

		</div>

		<div class="wrapper__buttons">

			<div class="reactive-constructor-cms__msgs">
				{{> msgs }}
			</div>

			{{#if canBeSaved }}

				<button class="reactive-constructor-cms-publish-button">
					Save and publish
				</button>
				<button class="reactive-constructor-cms-save-draft-button">
					Save
				</button>
				<button class="reactive-constructor-cms-duplicate-button">
					Duplicate
				</button>
				<button class="reactive-constructor-cms-remove-button">
					Remove
				</button>
				<button class="reactive-constructor-cms-unpublish-button">
					Unpublish
				</button>
				<button class="reactive-constructor-cms-go-back-one-backup-version">
					Back one version
				</button>

			{{/if}}
			<button class="reactive-constructor-cms-close-button">
				Close
			</button>

		</div>

	</div>

</template>

<template name="reactiveConstructorCms__loadSavedDoc">

	<h1>Open saved document</h1>

	{{#if currentUser }}

		{{#if Template.subscriptionsReady }}
						
			{{#each reactiveConstructorCms__constructors }}

				<h3>{{ constructorName }}</h3>

				<ul>

					{{#each items }}

						<li>
							<a class="reactive-constructor-cms-edit-doc-from-list">
								{{ ../constructorName }} {{ getType }}: {{ reactiveConstructorCmsName }}
							</a>
						</li>

					{{/each}}

					<li>
						<a class="reactive-constructor-cms-create-doc-from-list">
						Add new {{ constructorName }}</a>
					</li>

				</ul>
			
			{{/each}}

	  {{else}}
	    <h4>Loading...</h4>
	  {{/if}}

  {{else}}

  	<p>You need to login.</p>

  {{/if}}
	
</template>